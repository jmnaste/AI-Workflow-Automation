# API Service Environment Variables (Local Development)
# Copy to .env and fill in values

# ============================================================================
# Required Configuration
# ============================================================================

# Docker network for service discovery
TRAEFIK_NETWORK=root_default

# Database connection (PostgreSQL)
DATABASE_URL=postgresql://app_root:dev_password@postgres:5432/app_db

# Auth service integration (for OAuth token vending)
AUTH_SERVICE_URL=http://auth:8000
SERVICE_SECRET=generate_me_with_openssl_rand_base64_32

# ============================================================================
# Optional Configuration
# ============================================================================

# Minimum Auth schema version required to start
# API will wait for Auth to reach this version before starting
API_MIN_AUTH_VERSION=0.1.0

# ============================================================================
# Webhook Worker Configuration
# ============================================================================

# Poll interval for webhook event processing (seconds)
WEBHOOK_WORKER_INTERVAL=10

# Max events processed per worker cycle
WEBHOOK_WORKER_BATCH_SIZE=10

# Max retry attempts for failed webhook events
WEBHOOK_MAX_RETRIES=3

# ============================================================================
# Public Webhook Configuration (Optional)
# ============================================================================
# Enable this section if you need to receive webhooks from MS365/Google

# Enable public routing via Traefik
# API_PUBLIC=true

# Public hostname for webhook receiver
# API_WEBHOOK_HOST=api.localhost

# Path prefix for webhook routes (e.g., /webhook)
# API_WEBHOOK_PATH_PREFIX=/webhook

# Traefik entrypoints (websecure for HTTPS, web for HTTP)
# API_ENTRYPOINTS=web

# TLS certificate resolver (if using HTTPS)
# TRAEFIK_CERT_RESOLVER=letsencrypt

# Full webhook URL (for MS365 subscriptions)
# API_WEBHOOK_URL=http://api.localhost/webhook

# ============================================================================
# MS365 Integration (Future - for testing)
# ============================================================================
# These are configured per-credential in the database, not in env vars

# ============================================================================
# Development / Debugging
# ============================================================================

# Python environment
# PYTHONUNBUFFERED=1

# Log level
# LOG_LEVEL=INFO
