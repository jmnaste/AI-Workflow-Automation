# Local Testing Environment Variables
# Copy this file to .env.local and fill in your actual values
# 
# IMPORTANT: Never commit .env.local to git (it's in .gitignore)

# ============================================================
# Network Configuration
# ============================================================
TRAEFIK_NETWORK=root_default

# ============================================================
# PostgreSQL Database
# ============================================================
POSTGRES_DB=app_db
POSTGRES_USER=app_root
POSTGRES_PASSWORD=local_dev_password
# Set to true to expose PostgreSQL on localhost:5432 for admin tools
POSTGRES_BIND_LOCALHOST=true

# ============================================================
# Auth Service Configuration
# ============================================================

# Admin Token (REQUIRED for user creation)
# Generate with: openssl rand -hex 32
ADMIN_TOKEN=your_admin_token_here_change_this

# JWT Configuration (REQUIRED)
# Generate with: openssl rand -base64 32
JWT_SECRET=local_dev_secret_at_least_32_characters_long_change_this

# OTP Configuration (Optional - relaxed for local testing)
OTP_EXPIRY_MINUTES=10
OTP_MAX_ATTEMPTS=5
RATE_LIMIT_WINDOW_MINUTES=1
RATE_LIMIT_MAX_REQUESTS=10

# Twilio SMS (Optional - use your real account)
# Get credentials from: https://console.twilio.com
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# SMTP Email (Optional - Gmail example)
# For Gmail: Generate app password at https://myaccount.google.com/apppasswords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@flovify.ca

# ============================================================
# WebUI / BFF Configuration
# ============================================================
UI_HOST=localhost
NODE_ENV=development
API_BASE_URL=http://api:8000
AUTH_BASE_URL=http://auth:8000
JWT_COOKIE_NAME=flovify_token

# Service Version (Optional)
SERVICE_SEMVER=0.1.0-local

# ============================================================
# Service-to-Service Authentication
# ============================================================

# Shared secret for Auth <-> API token vending
# Generate with: openssl rand -base64 32
# IMPORTANT: Must be the same in Auth and API services
SERVICE_SECRET=local_dev_service_secret_change_this_to_something_secure

# ============================================================
# API Service Configuration
# ============================================================

# Minimum Auth schema version required for API to start
API_MIN_AUTH_VERSION=0.1.0

# Auth service URL (internal Docker network)
AUTH_SERVICE_URL=http://auth:8000

# Webhook Worker Configuration
WEBHOOK_WORKER_INTERVAL=10        # Poll interval in seconds
WEBHOOK_WORKER_BATCH_SIZE=10      # Max events processed per cycle
WEBHOOK_MAX_RETRIES=3              # Max retry attempts for failed events

# Public webhook configuration (optional - for MS365/Google webhooks)
# API_PUBLIC=true
# API_WEBHOOK_HOST=api.localhost
# API_WEBHOOK_PATH_PREFIX=/webhook
# API_ENTRYPOINTS=web
# API_WEBHOOK_URL=http://api.localhost/webhook
